generator client {
  provider = "prisma-client-py"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// AI GATEWAY - Integrations, Models, Requests, Usage, Templates

model Integration {
  id              String    @id @default(uuid())
  name            String
  provider        String
  config          Json
  isActive        Boolean   @default(true)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  @@map("ai_integrations")
}

model AIModel {
  id              String    @id @default(uuid())
  name            String
  provider        String
  capabilities    String[]
  config          Json?
  isActive        Boolean   @default(true)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  @@map("ai_models")
}

model AIRequest {
  id              String    @id @default(uuid())
  userId          String?
  modelId         String?
  prompt          String    @db.Text
  response        String?   @db.Text
  tokensUsed      Int?
  latencyMs       Int?
  createdAt       DateTime  @default(now())
  @@index([userId, createdAt])
  @@map("ai_requests")
}

model AIUsage {
  id              String    @id @default(uuid())
  date            DateTime  @db.Date
  modelId         String?
  requests        Int       @default(0)
  tokens          Int       @default(0)
  cost            Float?
  createdAt       DateTime  @default(now())
  @@unique([date, modelId])
  @@map("ai_usage")
}

model AITemplate {
  id              String    @id @default(uuid())
  name            String
  description     String?
  promptTemplate  String    @db.Text
  variables       String[]
  isActive        Boolean   @default(true)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  @@map("ai_templates")
}
